---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE, SOCIAL_LINKS, LOGOS } from '../consts';
---

<header>
	<nav>
		<a href="/" class="logo">
			<img src={LOGOS.icon} alt="Neuroship" class="logo-icon" />
		</a>
		
		<div class="nav-links">
			<HeaderLink href="/">Home</HeaderLink>
			<HeaderLink href="/about">About</HeaderLink>
			<HeaderLink href="/blog">Blog</HeaderLink>
		</div>
		
		<button class="menu-btn" aria-label="Menu" id="mobile-menu-toggle">
			<svg viewBox="0 0 24 24" width="24" height="24">
				<rect class="bar bar-1" x="4" y="6" width="16" height="1.5" fill="currentColor"/>
				<rect class="bar bar-2" x="4" y="11.25" width="16" height="1.5" fill="currentColor"/>
				<rect class="bar bar-3" x="4" y="16.5" width="16" height="1.5" fill="currentColor"/>
			</svg>
		</button>
	</nav>
</header>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobile-menu">
	<div class="mobile-menu-inner">
		<nav class="mobile-nav">
			<a href="/" class="mobile-nav-link">Home</a>
			<a href="/about" class="mobile-nav-link">About</a>
			<a href="/blog" class="mobile-nav-link">Blog</a>
		</nav>
		<div class="mobile-footer">
			<div class="mobile-social">
				<a href={SOCIAL_LINKS.github} target="_blank" aria-label="GitHub">GitHub</a>
				<a href={SOCIAL_LINKS.twitter} target="_blank" aria-label="Twitter">Twitter</a>
				<a href={SOCIAL_LINKS.linkedin} target="_blank" aria-label="LinkedIn">LinkedIn</a>
			</div>
		</div>
	</div>
</div>

<style>
	header {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		z-index: 1000;
		background: rgba(221, 221, 221, 0.9);
		backdrop-filter: blur(10px);
		-webkit-backdrop-filter: blur(10px);
	}

	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		max-width: 1400px;
		margin: 0 auto;
		padding: 0 2rem;
		height: 72px;
	}

	.logo {
		display: flex;
		align-items: center;
		text-decoration: none;
	}

	.logo-icon {
		width: 40px;
		height: 40px;
		object-fit: contain;
	}

	.nav-links {
		display: flex;
		align-items: center;
		gap: 2rem;
	}

	.menu-btn {
		display: none;
		background: none;
		border: none;
		cursor: pointer;
		padding: 0.5rem;
		color: var(--text-primary);
	}

	.menu-btn svg {
		display: block;
	}

	/* Mobile Menu - Global styles for elements outside header */
	:global(.mobile-menu) {
		display: none;
	}

	:global(.mobile-menu-inner) {
		display: flex;
		flex-direction: column;
		height: 100%;
		padding: 6rem 2rem 2rem;
	}

	:global(.mobile-nav) {
		display: flex;
		flex-direction: column;
		gap: 0;
		flex: 1;
	}

	:global(.mobile-nav-link) {
		font-size: 2rem;
		font-weight: 200;
		color: var(--black, #000);
		text-decoration: none;
		padding: 1rem 0;
		border-bottom: 1px solid var(--gray-200, #e4e4e7);
		transition: color 0.3s ease;
	}

	:global(.mobile-nav-link):hover {
		color: var(--gray-500, #71717a);
	}

	:global(.mobile-footer) {
		padding-top: 2rem;
		border-top: 1px solid var(--gray-200, #e4e4e7);
	}

	:global(.mobile-social) {
		display: flex;
		gap: 1.5rem;
	}

	:global(.mobile-social) a {
		font-size: 0.875rem;
		color: var(--gray-500, #71717a);
		text-decoration: none;
		transition: color 0.3s ease;
	}

	:global(.mobile-social) a:hover {
		color: var(--black, #000);
	}

	@media (max-width: 768px) {
		nav {
			padding: 0 1rem;
			height: 60px;
		}

		.nav-links {
			display: none;
		}

		.menu-btn {
			display: block;
		}

		.logo-icon {
			width: 32px;
			height: 32px;
		}

		:global(.mobile-menu) {
			display: block;
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			width: 100%;
			height: 100%;
			background: var(--white, #ffffff);
			z-index: 999;
			opacity: 0;
			visibility: hidden;
			pointer-events: none;
			transition: opacity 0.3s ease, visibility 0.3s ease;
		}

		:global(.mobile-menu.active) {
			opacity: 1;
			visibility: visible;
			pointer-events: auto;
		}
	}
</style>

<script is:inline>
	document.addEventListener('DOMContentLoaded', () => {
		const menuBtn = document.getElementById('mobile-menu-toggle');
		const mobileMenu = document.getElementById('mobile-menu');
		const mobileLinks = document.querySelectorAll('.mobile-nav-link');
		const bars = menuBtn?.querySelectorAll('.bar');

		function toggleMenu() {
			const isActive = mobileMenu?.classList.toggle('active');
			document.body.style.overflow = isActive ? 'hidden' : '';
			
			// Animate hamburger to X
			if (bars) {
				if (isActive) {
					bars[0].style.transform = 'rotate(45deg) translate(4px, 4px)';
					bars[1].style.opacity = '0';
					bars[2].style.transform = 'rotate(-45deg) translate(4px, -4px)';
				} else {
					bars[0].style.transform = '';
					bars[1].style.opacity = '1';
					bars[2].style.transform = '';
				}
			}
		}

		function closeMenu() {
			mobileMenu?.classList.remove('active');
			document.body.style.overflow = '';
			if (bars) {
				bars[0].style.transform = '';
				bars[1].style.opacity = '1';
				bars[2].style.transform = '';
			}
		}

		menuBtn?.addEventListener('click', toggleMenu);
		mobileLinks.forEach(link => {
			link.addEventListener('click', closeMenu);
		});
	});
</script>
